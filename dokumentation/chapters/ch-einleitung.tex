\chapter{Einleitung}
\label{sec:einl}
Das High-Performance-Computing (HPC) besch\"aftigt sich mit dem Hochleistungsrechnen. Im Bereich des High-Performance-Computing geht es darum, dass Computer mit m\"oglichst grosser Leistung und \"moglichst vielen parallelen Prozessen operieren. Dabei ist es unerl\"asslich, dass zum einen CPU-Berechnungen als auch Speicher-Zugriffe m\"oglichst schnell sind.
\section{BWHPC}
Die Arbeiten in diesem Projekt werden am Hochleistungscluster BWHPC durchgef\"uhrt. Das BWHPC ist ein Hochleistungscluster des Landes Baden W\"urttemberg, welcher an der Universit\"at Karlsruhe steht und f\"ur Forschungszwecke eingesetzt wird.
\section{Mooresches Gesetz}
Die Leistung von Prozessoren wird immer schneller. Die Gewschwindigkeit des Wachstums kann durch das sog. Mooresche Gesetz beschrieben werden. Die Definition dieses Gesetzes ist im folgenden gegeben.

\begin{quote}Die Anzahl an Transistoren, die in einen integrierten Schaltkreis festgelegter Gr\"osse passen, verdoppelt sich etwa alle zwei Jahre.~\cite{Schanze.25.02.2016}\end{quote}
Das Mooresche Gesetz sagt im Umkehrschluss also aus, dass sich die Prozessorleistung etwa alle zwei Jahre verdoppelt. Dieses Wachstum ist in Abbildung \ref{fig:moore} f\"ur Intelprozessoren beispielhaft dargestellt.

\begin{figure}[h]
	\centering
	\includegraphics[width=7cm]{fig/Moore.jpg}
	\caption{Mooresches Gesetz}
	\label{fig:moore}
\end{figure}
Auffallend in Abbildung \ref{fig:moore} ist, dass die Frequenz der einzelnen Kerne seit einigen Jahren nicht mehr zunimmt. Dies bedeutet, dass das Wachstum nicht mehr durch das Steigern von Leistung, sondern durch das Parallelisieren von CPU-Kernen bestimmt wird. Gerade im Bereich des Hochleistungsrechnen ergibt sich daraus, dass viele Anwendungen parallel ausgef\"uhrt werden.
\section{Speicherzugriffe}
Mit Speicherzugriffen kann ein Prozessor Daten aus einem Speicher holen und auch in ihn schreiben. Dabei kann grob zwischen Registern, Caches, Hauptspeicher und Festplatte unterschieden werden. Wohingegen der Zugriff auf Register ohne grosse Latenzen m\"oglich ist, ist der Zugriff auf andere Speicher deutlich langsamer. Die Zugriffszeiten sind in Tabelle \ref{tab:Speicher} vergleichend dargestellt.
\begin{table}[h]
	\centering
	\begin{tabular}{l|l}
		\textbf{Speicher} & \textbf{Zugriffszeit} \\
		\hline
		CPU zu L3-Cache & 10 mal schneller \\
		\hline
		CPU zu Hauptspeicher & 100 bis 1000 mal schneller \\
		\hline
		CPU zu Festplatte & 1000 bis 1000000 mal schneller \\
	\end{tabular}
	\caption{Speicherzugriffe}
	\label{tab:Speicher}
\end{table}

Aufgrund dieser Geschwindigkeitsunterschiede ist es notigwendig den Zugriff auf Speicher m\"oglichst effizient zu gestalten, da es sonst zu erheblichen Engp\"assen im Programmabl\"aufen kommen kann.

\section{Dateisysteme}
Der Zugriff auf Speicher geschieht \"uber Dateisysteme. Ein Dateisystem ist notwendig, damit Programme in einem Betriebssystem auf Dateien zugreifen k\"onnen, welche auf der Festplatte liegen.
Bei Dateisystemen kann im Wesentlichen zwischen seriellen und parallelen Dateisystemen unterschieden werden. Die Unterscheidung hierbei liegt darin, wie parallel ausgef\"uhrte Programme auf Dateien zugreifen.
\subsection{Serielles IO}
Beim seriellen IO l\"auft der komplette IO \"uber einen Masterprozess. Dies bedeutet, dass Programme nicht gleichzeitig auf eine Datei zugreifen k\"onnen. Dies ist in Abbildung \ref{fig:serial} ersichtlich.
\begin{figure}[h]
	\centering
	\includegraphics[width=7cm]{fig/SerialIO.jpg}
	\caption{Serial IO \cite{Cazes.26.09.2013}}
	\label{fig:serial}
\end{figure}

In Abbildung \ref{fig:serial} ist zu erkennen, dass es zu starken Engp\"assen kommen kann, wenn mehrere Programme gleichzeitig auf eine Datei zugreifen wollen. Diese Art des IO stellt daher auf kleinen Desktop-Computern mit nur wenigen parallelen Programmen kein Problem dar, im Bereich des High-Performance-Computing mit vielen parallelen Programmen sollte aber auf andere Methoden zur\"uckgegriffen werden.\cite{Cazes.26.09.2013}

\subsection{Paralleles IO}
Im Gegensatz zum seriellen IO ist es beim parallelen IO m\"oglich, dass mehrere Prozesse zeitgleich auf eine Datei zugreifen k\"onnen. Dies ist in \ref{fig:parallel} dargestellt. Darin wird ersichtlich, dass der IO nicht mehr \"uber einen Masterprozess l\"auft, sondern, dass die einzelnen Prozesse ihren IO unabh\"angig voneinander durchf\"uhren.
\begin{figure}[h]
	\centering
	\includegraphics[width=7cm]{fig/ParallelIO.jpg}
	\caption{Parallel IO \cite{Cazes.26.09.2013}}
	\label{fig:parallel}
\end{figure}
Der Vorteil hierbei liegt darin, dass die einzelnen Prozesse parallel auf Dateien zugreifen k\"onnen. Gerade im Bereich des High-Performance-Computing mit sehr vielen parallelen Prozessen stellt dies einen wichtigen Vorteil dar.\cite{Cazes.26.09.2013}
\subsection{POSIX IO}
POSIX-IO ist der IO-Part des POSIX-Standards. Der POSIX-Standard ist ein Standard f\"Ur die Kommunikation von Prozessen mit dem Betriebssystem. POSIX-IO beschreibt dabei verschiedene Funktionen, \"uber welche Programme in einem POSIX-Betriebssystem auf Speicher zugreifen k\"onnen. POSIX-IO ist eine Form des seriellen IO, was im Bereich des High-Performance-Computings zu Problemen f\"uhren kann, welche im Folgenden kurz erl\"autert werden sollen.
\subsubsection{Metadaten}
Dateien auf einem POSIX-Dateisystem m\"ussen eine Vielzahl an Metadaten besitzen. Sollen Informationen \"uber eine Datei angezeigt werden, m\"ussen diese Metadaten ausgelesen werden. Auf HPC-Systemen kann dies einen Nachteil darstellen, da das Auslesen der Metadaten von vielen Dateien mitunter sehr lange dauert\cite{Layton.02.03.2010}.Dar\"uber hinaus sind die Metadaten in POSIX-IO sehr unflexibel, da s\"amtliche Dateien alle Metadaten besitzen m\"ussen und nicht bspw. Metadaten f\"ur alle Dateien in einem Ordner gelten k\"onnen.
\subsubsection{File-Descriptoren}
Bevor eine Datei in POSIX gelesen werden kann, muss diese zun\"achst ge\"offnet werden, um einen File-Descriptor zu erhalten. Mit diesem File-Descriptor wird sichergestellt, dass immer nur ein Prozess auf eine Datei zugreifen kann. Wird eine Datei wieder geschlossen, wird der File-Descriptor wieder freigegeben.\newline
Der Nachteil von File-Descriptoren kommt zum Tragen, wenn viele Prozesse gleichzeitig auf ein Dateisystem zugreifen wollen. Dann muss das Betriebssystem sehr viele File-Descriptoren parallel verwalten, wodurch bspw. das \"Offnen einer Datei immer langsamer wird, je mehr Prozesse parallel auf das Dateisystem zugreifen. In Abbildung \ref{fig:posix} ist dabei ersichtlich, dass das \"Offnen einer Datei linear langsamer wird, je mehr parallele Prozesse auf das Dateisystem zugreifen.
\begin{figure}[h]
	\centering
	\includegraphics[width=7cm]{fig/PosixIO.jpg}
	\caption{\"Offnen einer Datei bei POSIX-IO \cite{Lockwood.11.09.2017}}
	\label{fig:posix}
\end{figure}
\subsubsection{Konsistenz}
Das Schreiben in eine Datei muss in POSIX konsistent sein. Dies bedeutet, dass das Schreiben die Ausf\"uhrung einer Applikation so lange blockiert, bis sichergestellt ist, dass ein Lesezugriff das neu geschriebene sieht. Dies hat wiederum den Nachteil, dass im Ausf√ºhren von Applikationen durch das Schreiben in eine Datei starke Latenzzeiten entstehen. Im HPC-Bereich mit vielen parallelen Applikationen stellt dies ein grosses Problem dar, wenn viele Prozesse gleichzeitig in Dateien schreiben wollen.
\cite{Lockwood.11.09.2017}
\subsection{MPI-IO}
MPIO-IO ist der IO-Part des Message Passing Interface (MPI). MPIO-IO ist dabei eine sog. Middleware, welche i.d.R. nicht direkt von Anwendungen sondern nur indirekt durch h\"ohere Schichten genutzt wird. Es definiert somit einen Standard f\"ur parallele IO-Operationen in einer MPI-Applikation. Im Gegensatz zu POSIX-IO ist der Zugriff auf Dateien hierbei nicht Bytestrom- sondern elementorientiert. Der Aufbau einer Datei in MPI-IO ist in Abbildung \ref{fig:dateityp} und in Abbildung \ref{fig:dateisicht} ersichtlich. Eine Datei wird dabei in sog. Fliessen aufgeteilt. Auf diese Fliessen kann \"uber einen Dateityp zugegriffen werden. Ein Dateityp beschreibt ein Muster an Fliessen, welches sich \"uber Teile der Datei oder \"uber die ganze Datei wiederholt. Ein solches Muster ist in Abbildung \ref{fig:dateityp} dargestellt. Jede Fliesse im Muster besteht wiederum aus einem elementaren Typ. Der elementare Typ ist der Datentyp \"uber welchen auf die Datei zugegriffen werden kann. Ein Prozess, der auf die Datei \"uber diesen Dateityp zugreift kann somit auf alle Fliessen zugreifen, welche in diesem Muster liegen.


\begin{figure}[h]
	\centering
	\includegraphics[width=7cm]{fig/Dateityp.jpg}
	\caption{Dateityp bei MPI-IO \cite{Kuhn.13.05.2016}}
	\label{fig:dateityp}
\end{figure}

In Abbildung \ref{fig:dateisicht} ist der Aufbau einer Datei aus Sicht von Prozessen dargestellt. Dies wird auch als Dateisicht bezeichnet. Jeder Prozess greift damit \"uber einen anderen Dateityp auf die Datei zu, wodurch mehrere Prozesse gleichzeitig auf die Datei zugreifen k\"onnen. 

\begin{figure}[h]
	\centering
	\includegraphics[width=7cm]{fig/Dateisicht.jpg}
	\caption{Dateisicht bei MPI-IO \cite{Kuhn.13.05.2016}}
	\label{fig:dateisicht}
\end{figure}
MPI-IO stellt im High-Performance-Bereich eine gute Alternative zu POSIX dar, da damit mehrere Prozesse zeitgleich auf eine Datei zugreifen k\"onnen. Die popul\"arste Implementierung von MPI-IO ist ROMIO. MPI-IO bildet dar\"uber hinaus die Basis vieler IO-Systeme wie bspw. HDF.\cite{Corbett.1995}\cite{Kuhn.13.05.2016}
